---
title: 由探究【DOC】迁出的深度调研
date: 2018-01-02 15:16:54
categories:
- WEB前端
tags: 
- HTML
comments: true
---

>**`<!DOCTYPE>`：**声明不是 HTML 标签；它是指示 web 浏览器关于页面使用哪个 HTML 版本进行编写的指令。    —— [W3school](http://www.w3school.com.cn/tags/tag_doctype.asp)

<!-- more -->

原本，我只是想把DOCTYPE各种复杂的声明形式搞清楚，虽然HTML5统一天下后，我们已经不需要费力不讨好地了解这些东西，只需要简简单单一句话搞定：
`<!DOCTYPE html>`
但是在一些特殊情况下，一个很小的bug可能导致我们很久找不到原因，比如某些标签未闭合、标签名大小写、对某些特定属性的支持、某些css样式未如愿展示等等，最后却发现是罪魁祸首竟然就是文档类型声明有问题，实在是呜呼哀哉。
那么，干脆就一探到底，拨开这个文档类型声明的神秘面纱。

## 一.浏览器历史

> 本不想把简单的问题复杂化，奈何在曲径通幽的探究过程中，发现边边角角的涉及的面很广，干脆就把它连根拔起好了~

### 1.割据纷争的战火年代

> 想必在猿界，有一部电影大家都很熟——《奔腾的代码》，描述了netscape如何大战IE，最后含恨而终的故事。没错，我们的故事也从那个时代讲起。

- 1989年，英国科学家`蒂姆·伯纳斯-李`发明了万维网（World Wide Web），光有了网络，得有个客户端来呈现网络传输的数据呀，于是，1990年，他又发明了第一个网页浏览器，同名`WorldWideWeb`（后来改名为Nexus）。
- 1993年，`伊利诺大学`的NCSA组织成员`马克·安德森`发明了第一款可显示图片的浏览器，唤作`Mosaic`，与马赛克同音。
- 1994年4月4日，`马克·安德森`出走，与吉姆·克拉克共同创建马赛克通讯公司（后更名为网景），1994年10月13日，发布第一款网页浏览器──Mosaic Netscape 0.9，后更名为`Netscape Navigator`（**领航者**），在发布的四个月內，就占据了四分之三的浏览器市场。
- 1994年5月，`Spyglass`公司（`伊利诺大学`厄巴纳香槟分校一个分支）以数百万美元的价格向NCSA的`Mosaic`浏览器取得授权。微软的`Internet Explorer`（**探索者**）在使用`Spyglass Mosaic`代码库授权下做出的浏览器。
	- 1995年，微软从`Spyglass`取得`Mosaic`授权，推出了`Internet Explorer 1`
	- 三个月后，推出`Internet Explorer 2`
	- 1996年，推出`Internet Explorer 3`版，成为第一款支持程式语言及CSS的商用浏览器，使市场占有率开始紧追Netscape
	- 1997年10月，`Internet Explorer 4`版正式推出，并在旧金山举行产品发布会
	- 1998年底，`Netscape`被`IE`击败，AOL以42亿美元收购网景业务。IE开始统领浏览器市场，市占率的最高峰达到2002年的96%，比`Netscape`的高峰还要高。
- 1996年，`Opera`首次亮相。从未被广泛使用，截至2002年2月，`Opera`市占率一直低于2%。其Mini版本的市占率在2011年4月达到浏览器总体使用量的1.1％
- 1998年，`Netscape`以开放源代码的授权形式，开放Communicator（网路套件）源代码，基于此技术重新开发`Mozilla Application Suite`网际网路套件
	- 2002年，把程序彻底重新编写后的新产品`Mozilla`在多方面得到改进，推出1.0版，并迅速在开源社区得以普及。
	- 2004年，`Mozilla`衍生出的轻量级浏览器，名为`Firefox`，推出1.0版
	- 2016年1月，`Firefox`全球市占率为9％至16%，为全球第二流行的网页浏览器
- 2000年10月23日，`Konqueror`（Conqueror的变体，意为**征服者**）随KDE 2一并发布，`Konqueror`是KDE桌面系统的一部分，主要用于文件管理、各种格式档案的查看，以及网页浏览。
- 2003年1月7日，在旧金山举行的Macworld大會上，史蒂夫·乔布斯宣布苹果正在开发自己的浏览器，称为`Safari`。
	- 2005年4月27日，海厄特宣布其內部实验版本的`Safari`通过了Acid2测试，成为第一个通过该测试的浏览器
	- 2005年4月29日，`Safari 2.0`版推出
- 2008年9月1日，Google官方网站撰文，将于第二天在超过100个国家同時发布`Chrome`的测试版。
	- 2012年5月21日，`Chrome`在全球范围内占有率达到33%，超越IE位居首位，而此记录持续时间至今，仍然一直上升，纪录不断
	- 2017年11月中`Chrome`的市场占有率达到64.02%

### 2.浏览器内核的演变

> 早期的网页浏览器并没有脚本语言，浏览器整体作为一个应用程序，核心功能就是渲染页面。在Mozilla将其Gecko排版引擎作为独立于浏览器的一个配件之后，**排版引擎**这个词汇才被广泛使用，下面就从这里讲起

#### Gecko

- 1997年，网景导航者在各方面的表现已经比不上它的主要竞争对手Internet Explorer，于是，网景收购了DigitalStyle，开始研发下一代的排版引擎。
- 1998年初，这个新的排版引擎名为`Raptor`，后因为商标问题，改名为`NGLayout`，最后又被网景市场部门重命名为`Gecko`。
- 2000年11月，采用`Gecko`引擎的Netscape 6.0被正式发布，目前为Mozilla Firefox网页浏览器所使用。
- 2003年7月15日，网景公司解散，而Mozilla基金会亦在当天成立，直到今天，`Gecko`排版引擎继续由Mozilla员工和社群所维护和发展。

#### Trident & EdgeHTML

- 1997年10月，由Mosaic源代码修改而来的`Trident`第一个版本伴随着Internet Explorer第四版发布，之后不断的加入新的技术并随着新版本的Internet Explorer发布
- 2013年10月17日，`Trident`7.0版本伴随IE11最终发布，支持部分的HTML5新标准以及CSS3，不过相较于其他流行的浏览器而言，支持度仍属于偏低。
- 2015年4月29日，微软宣布代号为“Project Spartan”的浏览器被正式命名为Microsoft Edge，并采用新的`EdgeHTML`引擎，该排版引擎是`Trident`的一个分支。自此`Trident`伴随着Internet Explorer走入历史。

#### KHTML & Webkit & Blink

- 2000年10月23日，Konqueror（Conqueror的变体，意为征服者）随KDE 2一并发布，该浏览器设计之初，就采用`KHTML`作为其排版引擎以及`KJS`为其JS引擎
- 2001年6月25日，Apple的Don Melton开始开发`Webkit`，作为Safari浏览器排版引擎之用，`WebKit`的`WebCore`及`JavaScriptCore`源自KDE的`KHTML`及`KJS`库的一个分支
- 2003年1月，`WebCore`首度发布于Macworld Expo中由乔布斯发表的Safari浏览器
- 2006年春季，谷歌聘请了顶级的Firefox开发人员，开始研究基于Apple `WebKit`和Mozilla Firefox的新浏览器原型，并开发出称为“V8”的高性能js引擎
- 2013年3月7日，`Webkit`商标被苹果公司在美国专利及商标局注册为其商标
- 2013年4月3日，Google宣布它创建了`WebKit`中`WebCore`组件的分支——`Blink`，将用于新版Google Chrome与Opera

#### Presto

- 2000年6月28日，Opera 4.0版本正式发布，开发代号为`Elektra`，后人普遍认为`Elektra`是Opera 4至6版的排版引擎，其实当时没有排版引擎这样的概念，而后Opera公司改写了软件历史，正式确认`Elektra`作为排版引擎名称的地位
- 2003年1月28日，Opera 7.0正式发布，并使用新的`Presto`排版引擎，后在Opera7.0至12.18版本所使用
- 2013年2月12日，Opera宣布将结束`Presto`引擎的开发，未来将以`Webkit`引擎为主
- 2013年5月28日，Opera Next 15正式发布，这是Opera首个采用`Blink`内核的测试版本，标志着`Presto`内核走向历史

## 二.标记语言发展史

> ok，看完了这场世纪之战，我们就了解了当年多少英烈的以身殉职才换来了我们现在前端猿人们的和平幸福，然而，我们故事的主角...却还没有登场，WHAT？！我们先来了解一下标记语言~


## 三.DTD和doctype

> ok，看完了另一场稍显温和的明争暗斗，我们的故事也就....要正式拉开序幕了，SHEE...EET！！我们先来看一下它们是如何定义的~
